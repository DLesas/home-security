# ===================================================================
# Main Device Configuration
# ===================================================================
# This file contains all settings for the CircuitPython devices.
# The DEVICE_MODULE variable determines the behavior of the device.

# -------------------------------------------------------------------
# Core Device Identity (REQUIRED)
# -------------------------------------------------------------------
# The primary module to run. Determines the device's main function and API endpoint.
# Valid options: "sensor", "alarm"
DEVICE_MODULE=sensor

# The unique ID for this specific device. Get this from the main server.
id=019848366b5978039ad934d67674f3e9

# -------------------------------------------------------------------
# WiFi Network Settings (REQUIRED)
# -------------------------------------------------------------------
ssid=REDACTED
password=REDACTED

# -------------------------------------------------------------------
# Server Connection Settings
# -------------------------------------------------------------------
# The static IP of the server. Leave blank if using UDP/Bonjour discovery.
server_ip=192.168.0.116

# The main port for the server's reverse proxy (Caddy).
server_port=80

# Whether to use HTTPS for API calls. 1 for true, 0 for false.
server_ssl=0

# The API version to use in request URLs.
api_version=1

# -------------------------------------------------------------------
# Network & Connection Behavior
# -------------------------------------------------------------------
# After a fatal, unrecoverable error, the device will turn its LED on solid
# for this many seconds before attempting a hard reboot.
fatal_error_reboot_delay_s=300

# Number of times to try connecting to WiFi before a fatal error.
max_wifi_attempts=15
wifi_blinks=5

# Number of times to try handshaking with the server before a fatal error.
max_networking_attempts=10
networking_blinks=7

# The User-Agent string to send in HTTP requests.
user_agent=doorSensor/1.0

# Timeout before sensor pings server to check state and also check
# everything is working as it should

ping_interval_s=60 

# -------------------------------------------------------------------
# Server Discovery Settings (UDP / Bonjour)
# -------------------------------------------------------------------
# The UDP port to broadcast on for server discovery.
server_udp_port=41234

# The "service name" to listen for in discovery responses.
server_service_name=SecurityGeneralServer
server_password=secret
tcp_timeout=5
client_tcp_port=31337

# -------------------------------------------------------------------
# Device-Specific Settings
# -------------------------------------------------------------------

# --- Door Sensor ---
door_switch_pin=GP22
buzzer_pin=GP15
local_alarm_timeout_s=60
should_deep_sleep=0

# --- Alarm Relay ---
relay_pin=GP22
port=8000
auto_turn_off_seconds=600